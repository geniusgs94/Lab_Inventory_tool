{% extends 'layout.html' %}

{% block content %}
<h2>Device Inventory</h2>
<form method="get" action="{{ url_for('index') }}">
    <label for="owner">Owner:</label>
    <input type="text" name="owner" value="{{ request.args.get('owner', '') }}">

    <label for="availability">Availability:</label>
    <select name="availability">
        <option value="">All</option>
        <option value="Available" {% if request.args.get('availability') == 'Available' %}selected{% endif %}>Available</option>
        <option value="In Use" {% if request.args.get('availability') == 'In Use' %}selected{% endif %}>In Use</option>
    </select>

    <label for="team">Team:</label>
    <input type="text" name="team" value="{{ request.args.get('team', '') }}">

    <button type="submit">Filter</button>
    <a href="{{ url_for('index') }}">Clear</a>
</form>

<table border="1">
    <thead>
        <tr>
            <th>MAC Address</th>
            <th>Device Model</th>
            <th>Owner</th>
            <th>Availability</th>
            <th>Reporting Manager</th>
            <th>Team</th>
            <th>IP Address</th>
            <th>Location</th>
            <th>Lease</th>
        </tr>
    </thead>
    <tbody>
        {% for device in devices %}
        <tr>
            <td>{{ device.mac_address }}</td>
            <td>{{ device.device_model }}</td>
            <td>{{ device.owner }}</td>
            <td>{{ device.availability }}</td>
            <td>{{ device.reporting_manager }}</td>
            <td>{{ device.team }}</td>
            <td>{{ device.ip_address }}</td>
            <td>{{ device.location }}</td>
            <td>{{ device.lease }}</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="9">No devices found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
